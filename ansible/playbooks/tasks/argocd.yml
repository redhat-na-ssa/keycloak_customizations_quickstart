---

- set_fact:
    namespace: "{{ namespace_argocd }}"
    resources_dir: "{{ resources_base_dir }}/argocd"
    work_dir_name: argocd
- include_role:
    name: ../roles/argocd
  when: >
    ACTION is not defined or
    ACTION is none or
    ACTION|trim() == "" or
    ACTION|trim() == "install"

- include_role:
    name: ../roles/argocd
    tasks_from: uninstall
  when: >
    ACTION is defined and
    ACTION|trim() == "uninstall"
